{"slots":{"0":{"name":"DB","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"reload()","filter":{"args":[{"value":"reload"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"0"},{"code":"-- FACTORY HUD v1.0 by carmo\n\n-- Any questions please contact carmo#1590 on discord\n-- THIS CODE NEEDS TO BE PLACED ON A BOARD TO READ CONTAINERS AND SAVE ALL VARIABLES TO DB\n\nlocal refresh_in_sec = 5 --export\nlocal vnameslot2 = \"MATERIAL_NAME_IN_CAPS\" --export\nlocal vnameslot3 = \"MATERIAL_NAME_IN_CAPS\" --export\nlocal vnameslot4 = \"MATERIAL_NAME_IN_CAPS\" --export\nlocal vnameslot5 = \"MATERIAL_NAME_IN_CAPS\" --export\nlocal vnameslot6 = \"MATERIAL_NAME_IN_CAPS\" --export\nlocal vnameslot7 = \"MATERIAL_NAME_IN_CAPS\" --export\nlocal vnameslot8 = \"MATERIAL_NAME_IN_CAPS\" --export\nlocal vnameslot9 = \"MATERIAL_NAME_IN_CAPS\" --export\nlocal vnameslot10 = \"MATERIAL_NAME_IN_CAPS\" --export\n\nunit.hide()\n\nfunction round(x)\n  return x>=0 and math.floor(x+0.5) or math.ceil(x-0.5)\nend\n\nfunction getQuantity(material, mass)\n   quantity = nil\n   if material == \"IRON\" then \n        quantity = round(mass / 7.85)\n   elseif material == \"ALUMINIUM\" then \n        quantity = round(mass / 2.7)\n   elseif material == \"SILICON\" then \n        quantity = round(mass / 2.33)\n   elseif material == \"SULFUR\" then \n        quantity = round(mass / 1.82)\n   elseif material == \"SODIUM\" then \n        quantity = round(mass / 0.97)\n   elseif material == \"LITHIUM\" then \n        quantity = round(mass / 0.53)\n   elseif material == \"SILVER\" then        \n        quantity = round(mass / 10.49)\n   elseif material == \"CALCIUM\" then \n        quantity = round(mass / 1.55)\n   elseif material == \"COPPER\" then \n        quantity = round(mass / 8.96)\n   elseif material == \"CARBON\" then \n        quantity = round(mass / 2.27)\n   elseif material == \"QUARTZ\" then \n        quantity = round(mass / 2.65)\n   elseif material == \"BAUXITE\" then \n        quantity = round(mass / 1.28)\n   elseif material == \"COAL\" then \n        quantity = round(mass / 1.35)\n   elseif material == \"HEMATITE\" then \n        quantity = round(mass / 5.04)\n   elseif material == \"MALACHITE\" then \n        quantity = round(mass / 4)\n   elseif material == \"LIMESTONE\" then \n        quantity = round(mass / 2.711)\n   elseif material == \"NATRON\" then        \n        quantity = round(mass / 1.55)\n   elseif material == \"ACANTHITE\" then \n        quantity = round(mass / 7.2)\n   elseif material == \"PETALITE\" then \n        quantity = round(mass / 2.41)\n   else \n        system.print(\"o id é: \" .. ore .. \" e a masss é \" .. math.floor(mass))\n        quantity = 666\n   end    \n   return quantity\nend\n\nfunction getContainers()\n  if slot2 ~= nil then vslot2 = getQuantity(vnameslot2, slot2.getItemsMass()) end\n  if slot3 ~= nil then vslot3 = getQuantity(vnameslot3, slot3.getItemsMass()) end\n  if slot4 ~= nil then vslot4 = getQuantity(vnameslot4, slot4.getItemsMass()) end\n  if slot5 ~= nil then vslot5 = getQuantity(vnameslot5, slot5.getItemsMass()) end\n  if slot6 ~= nil then vslot6 = getQuantity(vnameslot6, slot6.getItemsMass()) end\n  if slot7 ~= nil then vslot7 = getQuantity(vnameslot7, slot7.getItemsMass()) end\n  if slot8 ~= nil then vslot8 = getQuantity(vnameslot8, slot8.getItemsMass()) end\n  if slot9 ~= nil then vslot9 = getQuantity(vnameslot9, slot9.getItemsMass()) end\n  if slot10 ~= nil then vslot10 = getQuantity(vnameslot10, slot10.getItemsMass()) end\nend\n\nfunction setScreen() \n  if slot2 ~= nil then x = vnameslot2 .. \": \" .. vslot2 .. \"<br>\" end  \n  if slot3 ~= nil then x = x .. vnameslot3 .. \": \" .. vslot3 .. \"<br>\" end\n  if slot4 ~= nil then x = x .. vnameslot4 .. \": \" .. vslot4 .. \"<br>\" end\n  if slot5 ~= nil then x = x .. vnameslot5 .. \": \" .. vslot5 .. \"<br>\" end\n  if slot6 ~= nil then x = x .. vnameslot6 .. \": \" .. vslot6 .. \"<br>\" end\n  if slot7 ~= nil then x = x .. vnameslot7 .. \": \" .. vslot7 .. \"<br>\" end\n  if slot8 ~= nil then x = x .. vnameslot8 .. \": \" .. vslot8 .. \"<br>\" end\n  if slot9 ~= nil then x = x .. vnameslot9 .. \": \" .. vslot9 .. \"<br>\" end\n  if slot10 ~= nil then x = x .. vnameslot10 .. \": \" .. vslot10 .. \"<br>\" end\n\n  if x == nil then \n        html = [[ <div style=\"font-size:4vw\">Please update LUA parameters with each slot name<br><br>Slot 1 should be DB and Slot 2 SCREEN (optional)</div> ]] \n        system.print(\"Please update LUA parameters with each slot name<br><br>Slot 1 should be DB and Slot 2 SCREEN (optional)\")\n  else\n        html = [[ <div style=\"font-size:4vw\">]] .. x .. [[</div> ]] \n  end\n  return html\nend\n\nfunction writeDB()\n   if DB ~= nil then\n     if slot2 ~= nil then DB.setIntValue(\"db\"..vnameslot2,vslot2) end\n  \tif slot3 ~= nil then DB.setIntValue(\"db\"..vnameslot3,vslot3) end\n  \tif slot4 ~= nil then DB.setIntValue(\"db\"..vnameslot4,vslot4) end\n  \tif slot5 ~= nil then DB.setIntValue(\"db\"..vnameslot5,vslot5) end\n  \tif slot6 ~= nil then DB.setIntValue(\"db\"..vnameslot6,vslot6) end\n  \tif slot7 ~= nil then DB.setIntValue(\"db\"..vnameslot7,vslot7) end\n  \tif slot8 ~= nil then DB.setIntValue(\"db\"..vnameslot8,vslot8) end\n  \tif slot9 ~= nil then DB.setIntValue(\"db\"..vnameslot9,vslot9) end\n  \tif slot10 ~= nil then DB.setIntValue(\"db\"..vnameslot10,vslot10) end\n   else\n     system.print(\"Please update LUA parameters with each slot name<br><br>Slot 1 should be DB, 2 SCREEN (OPTIONAL)\")\n   end\nend\n\nfunction reload()\n  if SCREEN ~= nil then \n    SCREEN.clear()\n    getContainers()\n    SCREEN.setCenteredText(setScreen())\n    writeDB()\n  else\n    getContainers()\n    writeDB()\n  end\nend\n\nunit.setTimer(\"reload\", refresh_in_sec)","filter":{"args":[],"signature":"start()","slotKey":"-2"},"key":"1"}],"methods":[],"events":[]}
